### 스터디에서 나왔던 질문 및 후기

- 유명인 트윗 댓글 예시) 해시값 사용할 때 쏠린 작업 부하를 완화시키는 방법 : 가장 간단한 해결책이 키의 시작/끝에 임의의 숫자를 붙이는 거라고 하는데, 무슨 의미인지?
    - 랜덤 숫자를 붙이면 해시값이 매번 다르게 나올 것이기 때문에 같은 노드로 가는 작업들을 각각 다른 노드로 분산시켜 줄 수 있음

  [LINE 오픈챗 서버가 100배 급증하는 트래픽을 다루는 방법](https://engineering.linecorp.com/ko/blog/how-line-openchat-server-handles-extreme-traffic-spikes)

    - 핫챗 만을 위해서 노드를 추가시킨다? 비용 문제가 있음
    - 래디스에 어느 정도 쌓아놓았다가 임계치를 넘어가면 한번에 처리하는 방식
- 클라이언트가 어떤 노드에 할당됐는지 알게 한다?
    - 어플리케이션 단에서 어떤 파티션으로 가야되는지 정보가 코드/로직으로 처리될 수 있도록 하는 것
    - 제한적인 용도로는 이렇게 처리하는게 더 나은 경우가 있을 수도…
    - 개발/운영하기 힘들 듯? 범용적인 방식은 아닌 거 같다
- HBase 운영 경험 (하지 말라는거 다 해봤음)
    - 타임스태프를 key로 잡아져 있음 → 트래픽이 늘어났을 때 한 노드에만 핫스팟 유발
        - 해결? 해싱으로 균열하게 해결, 범위 스캔은 가능하게 함
        - 앞은 솔트값(해싱) + 뒷부분은 타임스탬프 유지
    - 모드 N 연산
        - 노드 하나 추가하는 순간 hell ㅜ
        - 해시값 다시 다 설정해줘야 했음
    - 동적 파티셔닝시 콜드 스타트 문제
        - 데이터 로우를 껍데기만 있고 알맹이가 없게 만들어놓아서, 20대에 분산시켜 놓아서 해결
    - 자동 vs 수동 재균형화
        - 특정 파티션이 임계값 이상으로 커질 때 자동으로 분할하게 하면? 운영이 바쁜 시간에 이게 돌아버리면 장애처럼 될 수도 있었다
    - DB 랭킹에서 그래서 내려가는 건가…
- 파티션 개수 고정

  [알림 서비스로 시작하는 서버 개발 / if(kakao)2022](https://www.youtube.com/watch?v=CmTO68I2HSc)

    - 고정 파티셔닝의 장점이 있나?
        - 아주 먼 미래까지 고려하지 않는다면 괜찮을수도 ㅋㅋ
        - 엘라스틱서치에서 샤드 구분하는게 고정이었던 듯