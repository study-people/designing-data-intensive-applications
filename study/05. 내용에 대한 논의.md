### 스터디에서 나왔던 질문 및 후기

- 잠금 경합? → 디스크는 하나니까 DB에서 lock을 걸어버리면 기다려야 함. 스케일 아웃하면 여러대로 분산되므로 오버헤드가 줄어듦
- 새로운 팔로워 설정에서 스냅샷을 주기적으로 쓰는데 리더의 복제 로그의 정확한 위치와 연관되어야 한다? → 스냅샷을 뜨면 그 이후 변경되는 로그 모두를 mysql binlog 등으로 파악해서 따라잡는다는 의미
- 리더가 장애인지 파악하는 방법? → 모든 시스템에서 timeout 방식을 사용할 수는 없을 것. 서비스 성격에 따라 다르므로… → 네트워크 지연이 있을 때 하둡은 액티브/마스터가 제대로 있는데 보내는 쪽에서는 타임아웃이 짧게 설정되어 있어서 standby에게 보내서 이 때 brain split이 발생. 실패할때까지 기다리다가 이때 다시 액티브에 보냄 → 그럼 어떻게 하나?? → 타임아웃 설정 기준은 답이 없는 듯
- 새로운 리더를 선출한다? → 리더가 장애일때 그 즉시 바로 새로운 리더를 뽑는 방법이 있고, controller 노드가 새로운 리더를 뽑아주는 방법이 있다 → 컨트롤러가 다음 리더를 선출하는 로직이 따로 있나? → 규칙이 있긴 있는데 자세히 보지는 않았다… (리더 후보군 중에서 넣었다 뻇다 하는 조건이 있는 듯) // 우리 조상님도 이렇게 했더라. 조선왕조실록 ㄷㄷㄷ (세군데 백업)
- 논리적 로그 복제? → 자바에서 바이트 코드 같은 느낌 아닐까, 논리적 로그라는 레이어를 하나 추가해서 플랫폼에 종속되지 않고 사용할 수 있는 것. 사람이 볼 수 있는 형태로 기록하지 않을까… (예시가 있었으면 좋았겠다)
- 자신이 쓴 로그 읽기에서 모든 요청은 리더가 포함된 데이터센터로 라우팅되어야 한다? → 네트워크 레벨에서 팔로워가 리더 없는 쪽의 데이터센터로 라우팅가면 안됨
- 실제로는 비동기식인데 동기식인척 한다? (뒷부분까지 다 읽고나서 앞부분 회고하는 것도 필요할 것 같다)
- 하둡에서는 마스터가 다운됐다고 해서 슬레이브 중에서 마스터를 다시 뽑지는 않는데, 여기서는 리더↔팔로워와 같은 개념으로 설명하고 있어서 좀 맞지 않는 부분이 있는 것 같다
- 하둡도 단일 리더인가? 마스터가 평소에는 두댄데 한대만 살아있고 나머지는 standby 상태. 둘다 액티브로는 돌면 안되서 단일 리더로 봐야 함
- 리더가 죽으면 팔로워가 새로운 리더가 되는 경우가 실제로 있었는지? 도메인이 나뉘어져 있는데 실제 라우팅하는 걸 바꿔줘야 하는데 이걸 알아서 rds에서 처리해주는지? aws에서 알아서 해줌 (장애났는데 1분만에 알아서 해결했더라)
- db 에서 ip를 그대로 사용하는데 이떄는? 중간에 프록시 서버를 하나 둚 → 프록시 서버가 죽으면??
- 면접에서 잘 나오는 것. 동기 vs 비동기식. blocking↔non-blocking 엮어서 물어보더라